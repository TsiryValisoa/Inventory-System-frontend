<div class="product-component">
    <div *ngIf="message" class="message" [ngClass]="messageType">{{message}}</div>

    <div class="product-header">
        <h1>Product</h1>

        <div class="product-controls">

            <div class="add-pro">
                <button class="add-product-btn" (click)="addProductComponent()">
                    <i class="fa-solid fa-circle-plus" style="margin-right:8px;"></i>
                    Add product
                </button>
            </div>

            <div class="search-wrapper">
                <div class="search-sup">
                    <input type="text" [(ngModel)]="searchProduct" placeholder="Search product">
                    <i class="fa-solid fa-magnifying-glass" (click)="handleSearch()" title="Search"></i>
                </div>
                <button (click)="searchProduct = ''; handleSearch()" class="refresh-btn" title="Refresh">
                     <i class="fa-solid fa-arrow-rotate-right"></i>
                </button>

                <div class="select-search">

                    <div class="select-icon-wrapper">
                        <i class="fa-solid fa-bars category-icon"></i>
                        <select [(ngModel)]="categoryId" name="categoryId" (change)="handleSearch()">
                            <option value="">Search a category</option>
                            <option *ngFor="let category of categories" [value]="category.id">{{category.name}}</option>
                        </select>
                    </div>

                    <button (click)="categoryId = ''; handleSearch()" class="cancel-btn" title="cancel">
                        <i class="fa-solid fa-circle-xmark"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="product-list" *ngIf="products.length > 0">
        <div class="product-item" *ngFor="let product of products">

            <img 
                [src]="product.imageUrl"
                [alt]="product.name"
                class="product-image"
            >

            <div class="product-info">
                <h3 class="name">{{product.name}}</h3>

                <div class="info-line">
                    <span>Product ref :</span>
                    <p>{{product.sku}}</p>
                </div>

                <div class="info-line">
                    <span>Price :</span>
                    <p>{{product.price}}</p>
                </div>

                <div class="info-line">
                    <span>Quantity :</span>
                    <p>{{product.stockQuantity}}</p>
                </div>

                <div *ngIf="product.expiryDate" class="info-line-date">
                    <span>Expired date :</span>
                    <p>{{product.expiryDate}}</p>
                </div>
                
                <p class="description">{{product.description}}</p>
            </div>

            <div class="product-actions">
                <button class="edit-btn" (click)="editProductComponent(product.id)" title="Edit">
                    <i class="fa-solid fa-pen-to-square"></i>
                </button>
                <button class="delete-btn" (click)="deleteProduct(product.id)" title="Delete">
                    <i class="fa-solid fa-trash"></i>
                </button>
            </div>
        </div>
    </div>

    <div class="modal-backdrop"  *ngIf="showDeleteModal">
        <div class="modal">
            <h4>Are you sure you want to delete this category ?</h4>
            <div class="modal-buttons">
                <button (click)="confirmDelete()" class="yes">Yes</button>
                <button (click)="cancelDelete()" class="no">No</button>
            </div>
        </div>
     </div>

    <!-- PAGONATIOOPN COMPONENT -->
     <app-pagination
        [currentPage]="currentPage"
        [totalPages]="totalPages"
        (pageChange)="onPageChange($event)"
     >
     </app-pagination>
</div>
